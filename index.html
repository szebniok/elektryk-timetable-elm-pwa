<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Plan lekcji</title>
	<meta name="theme-color" content="#fff034">
	<link rel="manifest" href="/manifest.json"
</head>
<body>
	<div id="main"></div>
	<script src="main.js"></script>
	<script>
		navigator.serviceWorker.register('sw.js', {
			scope: '.'
		});

		let json;
		if (!navigator.onLine) {
			console.log("offline");

			json = localStorage.getItem('4ct');
		} else {
			console.log("online");

			json = null;
		}

		console.log(json);

		var node = document.getElementById("main");
		var app = Elm.Main.fullscreen({ online: navigator.onLine, json: json });

		app.ports.saveInLocalStorage.subscribe(save);

		function save(json) {
			console.log(json);
			console.log('co jest');
			localStorage.setItem('4ct', json);
		}
	</script>

</body>
</html>